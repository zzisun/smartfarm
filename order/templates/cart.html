{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishian</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&display=swap" rel="stylesheet">
    <link href="//db.onlinewebfonts.com/c/d4d6e1a6527a21185217393c427a52cb?family=Segoe+UI+Semibold" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href={% static "css/default.css" %}>
    <script type="text/javascript" src={% static "js/jquery-3.5.1.min.js" %}></script>
    <script type="text/javascript" src={% static "js/main.js" %}></script>
</head>
<body>
    <!-- header -->
    <header class="header">
        <a href="{% url 'ProductListView' %}" class="back_btn  txt_medium">BACK</a>
    </header>
    <!-- //header -->
    <!-- device -->
    <div class="footer_on">
        <div class="cont cart_con">
            <h1>My Cart</h1>
            <ul class="pro_ul">
                {% for product in cart %}
                <li class="">
                    <img src="{{product.product.image.url}}" width="50" alt="product image" class="pro_img">
                    <div class="txt_box">
                        <p class="txt_black33">{{ product.product.name }}</p>
                        <p class="txt_black33 tm6">BDT {{ product.amount | intcomma }}</p>
                        <ul class="choice_wrap tm9">
                            <li class="clear fl">
                                <span class="rm7">Size</span>
                                <div class="select_wrap">
                                    <p>S</p>
                                    <ul>
                                        <li class="on">S</li>
                                        <li>M</li>
                                        <li>L</li>
                                    </ul>
                                </div>
                            </li>
                            <li class="clear fr">
                                <span class="rm10">Qty</span>
                                <div class="choice_input">
                                    <input type="text" value={{ product.quantity }} min="1" id="{{ product.product.name }}">
                                    <form method = "POST" action = "/order/create/">
                                    <button type="button" onclick="up_click('{{ product.product.name }}','{{ product.id }}');"><img src={% static "images/ic_gray_up.png" %} alt="up arrow icon"></button>
                                    <button type="button" onclick="down_click('{{ product.product.name }}','{{ product.id }}')"><img src={% static "images/ic_gray_down.png" %} alt="down arrow icon"></button>
                                </div>
                            </li>
                        </ul>
                    </div>
                </li>
                {% endfor %}
                <script>
                     function up_click(name,id){
                         document.getElementById(name).value ++;
                         var form = document.createElement('form');
                         form.setAttribute('method','Post');
                         var url = 'modify/' + id;
                         form.setAttribute('action',url);
                         var hiddenField = document.createElement("input");
                         hiddenField.setAttribute("type","hidden");
                         hiddenField.setAttribute("name",'quantity');
                         hiddenField.setAttribute("value",document.getElementById(name).value);
                         form.appendChild(hiddenField);
                         document.body.appendChild(form);
                         form.submit();
                     }
                     function down_click(name,id){
                         if(document.getElementById(name).value > 1) {
                             document.getElementById(name).value--;
                             var form = document.createElement('form');
                             form.setAttribute('method', 'Post');
                             var url = 'modify/' + id;
                             form.setAttribute('action', url);
                             var hiddenField = document.createElement("input");
                             hiddenField.setAttribute("type", "hidden");
                             hiddenField.setAttribute("name", 'quantity');
                             hiddenField.setAttribute("value", document.getElementById(name).value);
                             form.appendChild(hiddenField);
                             document.body.appendChild(form);
                             form.submit();
                         }
                     }
                </script>
            </ul>
            <div class="bottom_box">
                <ul>
                    <li class="clear bm10">
                        <p class="fl txt_black33 txt_medium">Sub total</p>
                        <div class="fr">
                            <span class="txt_12">BDT</span>
                            <span class="txt_12">{{ amount | intcomma }}</span>
                        </div>
                    </li>
                    <li class="clear bm10">
                        <p class="fl txt_black33 txt_medium">VAT (15%)</p>
                        <div class="fr">
                            <span class="txt_12">BDT</span>
                            <span class="txt_12">{{ vat | intcomma }}</span>
                        </div>
                    </li>
                    <li class="clear bm20">
                        <p class="fl txt_black33 txt_medium">Delivery Charge</p>
                        <div class="fr">
                            <span class="txt_12">BDT</span>
                            <span class="txt_12">{{ delivery | intcomma }}</span>
                        </div>
                    </li>
                    <li class="clear total_li">
                        <p class="fl txt_black33 bold">Total</p>
                        <p class="fr txt_black33 bold">BDT {{ total | intcomma }}</p>
                    </li>
                </ul>
                <a href="{% url 'payment' %}" class="btn">Checkout</a>
            </div>
        </div>
    </div>
    <!-- //device -->
    <!-- footer_gnb -->
    <footer class="footer_gnb">
        <ul class="gnb_ul">
            <li>
                <a href="#"><img src={% static "images/ic_store.png" %} alt="store icon"></a>
            </li>
            <li>
                <a href="#"><img src={% static "images/ic_community.png" %} alt="community icon"></a>
            </li>
        </ul>
        <a href="javascript:;" class="gnb_home"><img src={% static "images/ic_monitor.png" %} alt="monitor icon"></a>
    </footer>
    <!-- //footer_gnb -->
</body>
</html>